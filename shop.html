<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meme Business Shop</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(45deg, #000000, #222222, #000000);
            background-size: 400% 400%;
            animation: wave 15s ease infinite;
            color: #ffffff;
            padding: 20px;
            margin: 0;
            user-select: none;
            min-height: 100vh;
            font-weight: 300;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        @keyframes wave {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .navbar {
            background: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
        }
        .navbar .nav-links {
            display: flex;
            justify-content: flex-start;
            gap: 15px;
        }
        .navbar a {
            color: #ffffff;
            text-decoration: none;
            font-size: 14px;
            font-weight: 300;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 16px;
            border-radius: 5px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .navbar a:hover {
            color: #00ffff;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
            background: rgba(0, 255, 255, 0.1);
            border-color: rgba(0, 255, 255, 0.5);
        }
        .shop-container {
            max-width: 1400px;
            margin: 0 auto;
            padding-top: 100px;
        }
        .coins {
            font-size: 1.5rem;
            margin-bottom: 30px;
            text-align: center;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(20px);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }
        .categories {
            display: flex;
            justify-content: center;
            margin-bottom: 50px;
            gap: 20px;
        }
        .category-btn {
            padding: 12px 24px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            color: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            border-radius: 25px;
            transition: all 0.3s ease;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .category-btn.active {
            background: rgba(0, 255, 255, 0.2);
            border-color: #00ffff;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }
        .category-btn:hover {
            border-color: #00ffff;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
        }
        .items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
        }
        .item {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(20px);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        .item:hover {
            border-color: #00ffff;
            box-shadow: 0 30px 60px rgba(0, 255, 255, 0.1);
            transform: translateY(-5px);
        }
        .item h3 {
            margin: 0 0 15px 0;
            font-size: 1.4rem;
            color: #00ffff;
            text-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
        }
        .item p {
            margin: 8px 0;
            line-height: 1.6;
            opacity: 0.9;
        }
        .buy-btn {
            padding: 12px 20px;
            background: rgba(0, 255, 255, 0.1);
            color: #00ffff;
            border: 1px solid #00ffff;
            cursor: pointer;
            border-radius: 25px;
            transition: all 0.3s ease;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 15px;
        }
        .buy-btn:hover {
            background: rgba(0, 255, 255, 0.3);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }
        .buy-btn:disabled {
            background: rgba(136, 136, 136, 0.1);
            color: #888;
            border-color: #888;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-links">
            <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="shop.html">–ú–∞–≥–∞–∑–∏–Ω</a>
            <a href="achievements.html">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</a>
            <a href="stats.html">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
            <a href="daily.html">–ï–∂–µ–¥–Ω–µ–≤–Ω–æ</a>
            <a href="#" onclick="logout()">–í—ã—Ö–æ–¥</a>
        </div>
    </nav>
    <div class="shop-container">
        <h1 style="text-align: center; text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);">–ú–∞–≥–∞–∑–∏–Ω –ú–µ–º–Ω–æ–≥–æ –ë–∏–∑–Ω–µ—Å–∞</h1>
        <div class="coins">–ú–æ–Ω–µ—Ç–∫–∏: <span id="coin-count">0</span></div>
        <div class="categories">
            <button class="category-btn active" data-category="businesses">–ë–∏–∑–Ω–µ—Å—ã</button>
            <button class="category-btn" data-category="upgrades">–£–ª—É—á—à–µ–Ω–∏—è</button>
            <button class="category-btn" data-category="researches">–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è</button>
            <button class="category-btn" data-category="memes">–ú–µ–º—ã</button>
        </div>
        <div class="items" id="items-container">
            <!-- Items will be populated by JS -->
        </div>
    </div>

    <script>
        const currentUser = localStorage.getItem('currentUser');
        if (!currentUser) {
            window.location.href = 'login.html';
        }

        let coins = parseFloat(localStorage.getItem(`${currentUser}_coins`)) || 0;
        let coinsPerClick = parseFloat(localStorage.getItem(`${currentUser}_coinsPerClick`)) || 1;
        let incomePerSec = parseFloat(localStorage.getItem(`${currentUser}_incomePerSec`)) || 0;
        let businesses = JSON.parse(localStorage.getItem(`${currentUser}_businesses`)) || {};
        let upgrades = JSON.parse(localStorage.getItem(`${currentUser}_upgrades`)) || {};
        let memes = JSON.parse(localStorage.getItem(`${currentUser}_memes`)) || {};
        let autoClickerClicksPerSec = parseInt(localStorage.getItem(`${currentUser}_autoClickerClicksPerSec`)) || 0;

        const coinCount = document.getElementById('coin-count');
        const itemsContainer = document.getElementById('items-container');
        const categoryBtns = document.querySelectorAll('.category-btn');

        const businessItems = [
            { id: 'lemonade', name: '–õ–∏–º–æ–Ω–∞–¥–Ω—ã–π –°—Ç–µ–Ω–¥', basePrice: 10, baseIncome: 1, description: '–ö–ª–∞—Å—Å–∏–∫–∞! üçã' },
            { id: 'newspaper', name: '–ì–∞–∑–µ—Ç–Ω—ã–π –ë–∏–∑–Ω–µ—Å', basePrice: 100, baseIncome: 10, description: '–ù–æ–≤–æ—Å—Ç–∏ - —ç—Ç–æ –∑–æ–ª–æ—Ç–æ! üì∞' },
            { id: 'carwash', name: '–ê–≤—Ç–æ–º–æ–π–∫–∞', basePrice: 1000, baseIncome: 100, description: '–ß–∏—Å—Ç–æ—Ç–∞ - –∑–∞–ª–æ–≥ —É—Å–ø–µ—Ö–∞! üöó' },
            { id: 'pizza', name: '–ü–∏—Ü—Ü–µ—Ä–∏—è', basePrice: 10000, baseIncome: 1000, description: '–í—Å–µ–º –Ω—Ä–∞–≤–∏—Ç—Å—è –ø–∏—Ü—Ü–∞! üçï' },
            { id: 'bank', name: '–ë–∞–Ω–∫', basePrice: 100000, baseIncome: 10000, description: '–î–µ–Ω—å–≥–∏ –ª—é–±—è—Ç –¥–µ–Ω—å–≥–∏! üè¶' },
            { id: 'factory', name: '–§–∞–±—Ä–∏–∫–∞', basePrice: 1000000, baseIncome: 100000, description: '–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –Ω–∞ –º–∞–∫—Å–∏–º—É–º! üè≠' },
            { id: 'oilrig', name: '–ù–µ—Ñ—Ç—è–Ω–∞—è –í—ã—à–∫–∞', basePrice: 10000000, baseIncome: 1000000, description: '–ß–µ—Ä–Ω–æ–µ –∑–æ–ª–æ—Ç–æ! üõ¢Ô∏è' },
            { id: 'spaceship', name: '–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –ö–æ—Ä–∞–±–ª—å', basePrice: 100000000, baseIncome: 10000000, description: '–ö –∑–≤–µ–∑–¥–∞–º! üöÄ' },
            { id: 'alien', name: '–ò–Ω–æ–ø–ª–∞–Ω–µ—Ç–Ω–∞—è –ö–æ–ª–æ–Ω–∏–∑–∞—Ü–∏—è', basePrice: 1000000000, baseIncome: 100000000, description: '–í–Ω–µ–∑–µ–º–Ω—ã–µ –±–æ–≥–∞—Ç—Å—Ç–≤–∞! üëΩ' },
            { id: 'blackhole', name: '–ß–µ—Ä–Ω–∞—è –î—ã—Ä–∞', basePrice: 10000000000, baseIncome: 1000000000, description: '–ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è! üï≥Ô∏è' },
        ];

        const upgradeItems = [
            { id: 'clickPower', name: '–°–∏–ª–∞ –ö–ª–∏–∫–∞', basePrice: 50, effect: () => coinsPerClick += 1, description: '+1 –º–æ–Ω–µ—Ç–∞ –∑–∞ –∫–ª–∏–∫', prerequisites: [] },
            { id: 'superClick', name: '–°—É–ø–µ—Ä –ö–ª–∏–∫', basePrice: 500, effect: () => coinsPerClick += 5, description: '+5 –º–æ–Ω–µ—Ç –∑–∞ –∫–ª–∏–∫', prerequisites: ['clickPower'] },
            { id: 'incomeBoost', name: '–ë—É—Å—Ç –î–æ—Ö–æ–¥–∞', basePrice: 500, effect: () => incomePerSec *= 1.1, description: '+10% –∫ –¥–æ—Ö–æ–¥—É/—Å–µ–∫', prerequisites: [] },
            { id: 'incomeBoost2', name: '–ë—É—Å—Ç –î–æ—Ö–æ–¥–∞ 2', basePrice: 5000, effect: () => incomePerSec *= 1.2, description: '+20% –∫ –¥–æ—Ö–æ–¥—É/—Å–µ–∫', prerequisites: ['incomeBoost'] },
            { id: 'autoClicker', name: '–ê–≤—Ç–æ-–∫–ª–∏–∫–µ—Ä', basePrice: 1000, effect: () => { autoClickerClicksPerSec += 1; localStorage.setItem(`${currentUser}_autoClickerClicksPerSec`, autoClickerClicksPerSec); }, description: '+1 –∫–ª–∏–∫/—Å–µ–∫', prerequisites: [] },
            { id: 'autoClicker2', name: '–ê–≤—Ç–æ-–∫–ª–∏–∫–µ—Ä 2', basePrice: 10000, effect: () => { autoClickerClicksPerSec += 5; localStorage.setItem(`${currentUser}_autoClickerClicksPerSec`, autoClickerClicksPerSec); }, description: '+5 –∫–ª–∏–∫–æ–≤/—Å–µ–∫', prerequisites: ['autoClicker'] },
            { id: 'lemonadeManager', name: '–ú–µ–Ω–µ–¥–∂–µ—Ä –õ–∏–º–æ–Ω–∞–¥–∞', basePrice: 500, effect: () => {}, description: '–£–¥–≤–∞–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ –ª–∏–º–æ–Ω–∞–¥–Ω–æ–≥–æ —Å—Ç–µ–Ω–¥–∞', prerequisites: [] },
            { id: 'newspaperManager', name: '–ú–µ–Ω–µ–¥–∂–µ—Ä –ì–∞–∑–µ—Ç—ã', basePrice: 5000, effect: () => {}, description: '–£–¥–≤–∞–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ –≥–∞–∑–µ—Ç–Ω–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞', prerequisites: ['lemonadeManager'] },
            { id: 'carwashManager', name: '–ú–µ–Ω–µ–¥–∂–µ—Ä –ê–≤—Ç–æ–º–æ–π–∫–∏', basePrice: 50000, effect: () => {}, description: '–£–¥–≤–∞–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ –∞–≤—Ç–æ–º–æ–π–∫–∏', prerequisites: ['newspaperManager'] },
            { id: 'pizzaManager', name: '–ú–µ–Ω–µ–¥–∂–µ—Ä –ü–∏—Ü—Ü–µ—Ä–∏–∏', basePrice: 500000, effect: () => {}, description: '–£–¥–≤–∞–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ –ø–∏—Ü—Ü–µ—Ä–∏–∏', prerequisites: ['carwashManager'] },
            { id: 'bankManager', name: '–ú–µ–Ω–µ–¥–∂–µ—Ä –ë–∞–Ω–∫–∞', basePrice: 5000000, effect: () => {}, description: '–£–¥–≤–∞–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ –±–∞–Ω–∫–∞', prerequisites: ['pizzaManager'] },
            { id: 'factoryManager', name: '–ú–µ–Ω–µ–¥–∂–µ—Ä –§–∞–±—Ä–∏–∫–∏', basePrice: 50000000, effect: () => {}, description: '–£–¥–≤–∞–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ —Ñ–∞–±—Ä–∏–∫–∏', prerequisites: ['bankManager'] },
            { id: 'oilrigManager', name: '–ú–µ–Ω–µ–¥–∂–µ—Ä –ù–µ—Ñ—Ç—è–Ω–æ–π –í—ã—à–∫–∏', basePrice: 500000000, effect: () => {}, description: '–£–¥–≤–∞–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ –Ω–µ—Ñ—Ç—è–Ω–æ–π –≤—ã—à–∫–∏', prerequisites: ['factoryManager'] },
            { id: 'spaceshipManager', name: '–ú–µ–Ω–µ–¥–∂–µ—Ä –ö–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ –ö–æ—Ä–∞–±–ª—è', basePrice: 5000000000, effect: () => {}, description: '–£–¥–≤–∞–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ –∫–æ—Ä–∞–±–ª—è', prerequisites: ['oilrigManager'] },
            { id: 'alienManager', name: '–ú–µ–Ω–µ–¥–∂–µ—Ä –ò–Ω–æ–ø–ª–∞–Ω–µ—Ç–Ω–æ–π –ö–æ–ª–æ–Ω–∏–∑–∞—Ü–∏–∏', basePrice: 50000000000, effect: () => {}, description: '–£–¥–≤–∞–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ –∏–Ω–æ–ø–ª–∞–Ω–µ—Ç–Ω–æ–π –∫–æ–ª–æ–Ω–∏–∑–∞—Ü–∏–∏', prerequisites: ['spaceshipManager'] },
            { id: 'blackholeManager', name: '–ú–µ–Ω–µ–¥–∂–µ—Ä –ß–µ—Ä–Ω–æ–π –î—ã—Ä—ã', basePrice: 500000000000, effect: () => {}, description: '–£–¥–≤–∞–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ —á–µ—Ä–Ω–æ–π –¥—ã—Ä—ã', prerequisites: ['alienManager'] },
        ];

        const researchItems = [
            { id: 'betterClicks', name: '–õ—É—á—à–∏–µ –ö–ª–∏–∫–∏', basePrice: 1000, effect: () => coinsPerClick *= 2, description: '–£–¥–≤–∞–∏–≤–∞–µ—Ç —Å–∏–ª—É –∫–ª–∏–∫–∞', prerequisites: ['superClick'] },
            { id: 'incomeResearch', name: '–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –î–æ—Ö–æ–¥–∞', basePrice: 10000, effect: () => incomePerSec *= 1.5, description: '+50% –∫ –¥–æ—Ö–æ–¥—É/—Å–µ–∫', prerequisites: ['incomeBoost2'] },
            { id: 'autoEfficiency', name: '–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ê–≤—Ç–æ', basePrice: 50000, effect: () => autoClickerClicksPerSec *= 2, description: '–£–¥–≤–∞–∏–≤–∞–µ—Ç –∞–≤—Ç–æ-–∫–ª–∏–∫–∏', prerequisites: ['autoClicker2'] },
            { id: 'globalManager', name: '–ì–ª–æ–±–∞–ª—å–Ω—ã–π –ú–µ–Ω–µ–¥–∂–µ—Ä', basePrice: 1000000, effect: () => {}, description: '–í—Å–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ 50% –ª—É—á—à–µ', prerequisites: ['blackholeManager'] },
        ];

        const memeItems = [
            { id: 'doge', name: 'Doge –ú–µ–º', basePrice: 1000, effect: () => alert('Much business! Very profit!'), description: 'Wow! üêï' },
            { id: 'pepe', name: 'Pepe –ë—É—Å—Ç', basePrice: 5000, effect: () => coins += 1000, description: 'Rare Pepe energy! üê∏' },
        ];

        function getPrice(base, owned) {
            return Math.floor(base * Math.pow(1.15, owned));
        }

        function saveGame() {
            localStorage.setItem(`${currentUser}_coins`, coins);
            localStorage.setItem(`${currentUser}_coinsPerClick`, coinsPerClick);
            localStorage.setItem(`${currentUser}_incomePerSec`, incomePerSec);
            localStorage.setItem(`${currentUser}_businesses`, JSON.stringify(businesses));
            localStorage.setItem(`${currentUser}_upgrades`, JSON.stringify(upgrades));
            localStorage.setItem(`${currentUser}_memes`, JSON.stringify(memes));
        }

        function updateDisplay() {
            coinCount.textContent = Math.floor(coins);
        }

        function startAutoClicker() {
            setInterval(() => {
                for (let i = 0; i < autoClickerClicksPerSec; i++) {
                    coins += coinsPerClick;
                    totalEarned += coinsPerClick;
                }
                updateDisplay();
                saveGame();
            }, 1000);
        }

        function renderItems(category) {
            itemsContainer.innerHTML = '';
            let items = [];
            if (category === 'businesses') items = businessItems;
            else if (category === 'upgrades') items = upgradeItems.filter(item => item.prerequisites.every(p => upgrades[p]));
            else if (category === 'researches') items = researchItems.filter(item => item.prerequisites.every(p => upgrades[p]));
            else if (category === 'memes') items = memeItems;

            items.forEach(item => {
                const owned = businesses[item.id] || upgrades[item.id] || memes[item.id] || 0;
                const price = getPrice(item.basePrice, owned);
                const income = item.baseIncome ? item.baseIncome * (owned + 1) : 0;

                const itemEl = document.createElement('div');
                itemEl.className = 'item';
                const canBuy = category !== 'researches' || owned === 0;
                itemEl.innerHTML = `
                    <h3>${item.name}</h3>
                    <p>${item.description}</p>
                    <p>–í–ª–∞–¥–µ–ª–µ—Ü: ${owned}</p>
                    <p>–¶–µ–Ω–∞: ${price}</p>
                    ${income ? `<p>–î–æ—Ö–æ–¥: ${income}/—Å–µ–∫</p>` : ''}
                    <button class="buy-btn" data-id="${item.id}" data-category="${category}" ${canBuy ? '' : 'disabled'}>${canBuy ? '–ö—É–ø–∏—Ç—å' : '–ö—É–ø–ª–µ–Ω–æ'}</button>
                `;
                itemsContainer.appendChild(itemEl);
            });
        }

        categoryBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                categoryBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                renderItems(btn.dataset.category);
            });
        });

        itemsContainer.addEventListener('click', (e) => {
            if (e.target.classList.contains('buy-btn')) {
                const id = e.target.dataset.id;
                const category = e.target.dataset.category;
                let itemList = category === 'businesses' ? businessItems : category === 'upgrades' ? upgradeItems : memeItems;
                let storage = category === 'businesses' ? businesses : category === 'upgrades' ? upgrades : memes;
                const item = itemList.find(i => i.id === id);
                const owned = storage[id] || 0;
                const price = getPrice(item.basePrice, owned);

                if (coins >= price) {
                    coins -= price;
                    storage[id] = owned + 1;
                    if (category === 'businesses') {
                        incomePerSec += item.baseIncome;
                    } else if (category === 'upgrades') {
                        item.effect();
                    } else if (category === 'memes') {
                        item.effect();
                    }
                    updateDisplay();
                    saveGame();
                    renderItems(category);
                }
            }
        });

        if (autoClickerClicksPerSec > 0) {
            startAutoClicker();
        }

        function generateIncome() {
            coins += incomePerSec;
            totalEarned += incomePerSec;
            updateDisplay();
            saveGame();
        }

        setInterval(generateIncome, 1000);

        updateDisplay();
        renderItems('businesses');

        function logout() {
            localStorage.removeItem('currentUser');
            window.location.href = 'login.html';
        }
    </script>
</body>
</html>