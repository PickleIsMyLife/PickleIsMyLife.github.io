<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meme Business Shop</title>
    <style>
        body {
            font-family: 'JetBrains Mono', monospace;
            background: linear-gradient(135deg, #000000 0%, #0A0A0A 100%);
            color: #ffffff;
            padding: 20px;
            margin: 0;
            user-select: none;
            min-height: 100vh;
        }
        .navbar {
            background: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
        }
        .navbar .nav-links {
            display: flex;
            justify-content: flex-start;
            gap: 15px;
        }
        .navbar a {
            color: #ffffff;
            text-decoration: none;
            font-size: 14px;
            font-weight: 300;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 16px;
            border-radius: 5px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .navbar a:hover {
            color: #00ffff;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
            background: rgba(0, 255, 255, 0.1);
            border-color: rgba(0, 255, 255, 0.5);
        }
        .shop-container {
            max-width: 1400px;
            margin: 0 auto;
            padding-top: 100px;
        }
        .coins {
            font-size: 1.5rem;
            margin-bottom: 30px;
            text-align: center;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(20px);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }
        .categories {
            display: flex;
            justify-content: center;
            margin-bottom: 50px;
            gap: 20px;
        }
        .category-btn {
            padding: 12px 24px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            color: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            border-radius: 25px;
            transition: all 0.3s ease;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .category-btn.active {
            background: rgba(0, 255, 255, 0.2);
            border-color: #00ffff;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }
        .category-btn:hover {
            border-color: #00ffff;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
        }
        .items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
        }
        .item {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(20px);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        .item:hover {
            border-color: #00ffff;
            box-shadow: 0 30px 60px rgba(0, 255, 255, 0.1);
            transform: translateY(-5px);
        }
        .item h3 {
            margin: 0 0 15px 0;
            font-size: 1.4rem;
            color: #00ffff;
            text-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
        }
        .item p {
            margin: 8px 0;
            line-height: 1.6;
            opacity: 0.9;
        }
        .buy-btn {
            padding: 12px 20px;
            background: rgba(0, 255, 255, 0.1);
            color: #00ffff;
            border: 1px solid #00ffff;
            cursor: pointer;
            border-radius: 25px;
            transition: all 0.3s ease;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 15px;
        }
        .buy-btn:hover {
            background: rgba(0, 255, 255, 0.3);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }
        .buy-btn:disabled {
            background: rgba(136, 136, 136, 0.1);
            color: #888;
            border-color: #888;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-links">
            <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="shop.html">–ú–∞–≥–∞–∑–∏–Ω</a>
            <a href="achievements.html">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</a>
            <a href="stats.html">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
            <a href="#" onclick="logout()">–í—ã—Ö–æ–¥</a>
        </div>
    </nav>
    <div class="shop-container">
        <h1 style="text-align: center; text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);">–ú–∞–≥–∞–∑–∏–Ω –ú–µ–º–Ω–æ–≥–æ –ë–∏–∑–Ω–µ—Å–∞</h1>
        <div class="coins">–ú–æ–Ω–µ—Ç–∫–∏: <span id="coin-count">0</span></div>
        <div class="categories">
            <button class="category-btn active" data-category="businesses">–ë–∏–∑–Ω–µ—Å—ã</button>
            <button class="category-btn" data-category="upgrades">–£–ª—É—á—à–µ–Ω–∏—è</button>
            <button class="category-btn" data-category="memes">–ú–µ–º—ã</button>
        </div>
        <div class="items" id="items-container">
            <!-- Items will be populated by JS -->
        </div>
    </div>

    <script>
        const currentUser = localStorage.getItem('currentUser');
        if (!currentUser) {
            window.location.href = 'login.html';
        }

        let coins = parseFloat(localStorage.getItem(`${currentUser}_coins`)) || 0;
        let coinsPerClick = parseFloat(localStorage.getItem(`${currentUser}_coinsPerClick`)) || 1;
        let incomePerSec = parseFloat(localStorage.getItem(`${currentUser}_incomePerSec`)) || 0;
        let businesses = JSON.parse(localStorage.getItem(`${currentUser}_businesses`)) || {};
        let upgrades = JSON.parse(localStorage.getItem(`${currentUser}_upgrades`)) || {};
        let memes = JSON.parse(localStorage.getItem(`${currentUser}_memes`)) || {};

        const coinCount = document.getElementById('coin-count');
        const itemsContainer = document.getElementById('items-container');
        const categoryBtns = document.querySelectorAll('.category-btn');

        const businessItems = [
            { id: 'lemonade', name: '–õ–∏–º–æ–Ω–∞–¥–Ω—ã–π –°—Ç–µ–Ω–¥', basePrice: 10, baseIncome: 1, description: '–ö–ª–∞—Å—Å–∏–∫–∞! üçã' },
            { id: 'newspaper', name: '–ì–∞–∑–µ—Ç–Ω—ã–π –ë–∏–∑–Ω–µ—Å', basePrice: 100, baseIncome: 10, description: '–ù–æ–≤–æ—Å—Ç–∏ - —ç—Ç–æ –∑–æ–ª–æ—Ç–æ! üì∞' },
            { id: 'carwash', name: '–ê–≤—Ç–æ–º–æ–π–∫–∞', basePrice: 1000, baseIncome: 100, description: '–ß–∏—Å—Ç–æ—Ç–∞ - –∑–∞–ª–æ–≥ —É—Å–ø–µ—Ö–∞! üöó' },
            { id: 'pizza', name: '–ü–∏—Ü—Ü–µ—Ä–∏—è', basePrice: 10000, baseIncome: 1000, description: '–í—Å–µ–º –Ω—Ä–∞–≤–∏—Ç—Å—è –ø–∏—Ü—Ü–∞! üçï' },
            { id: 'bank', name: '–ë–∞–Ω–∫', basePrice: 100000, baseIncome: 10000, description: '–î–µ–Ω—å–≥–∏ –ª—é–±—è—Ç –¥–µ–Ω—å–≥–∏! üè¶' },
        ];

        const upgradeItems = [
            { id: 'clickPower', name: '–°–∏–ª–∞ –ö–ª–∏–∫–∞', basePrice: 50, effect: () => coinsPerClick += 1, description: '+1 –º–æ–Ω–µ—Ç–∞ –∑–∞ –∫–ª–∏–∫' },
            { id: 'incomeBoost', name: '–ë—É—Å—Ç –î–æ—Ö–æ–¥–∞', basePrice: 500, effect: () => incomePerSec *= 1.1, description: '+10% –∫ –¥–æ—Ö–æ–¥—É/—Å–µ–∫' },
        ];

        const memeItems = [
            { id: 'doge', name: 'Doge –ú–µ–º', basePrice: 1000, effect: () => alert('Much business! Very profit!'), description: 'Wow! üêï' },
            { id: 'pepe', name: 'Pepe –ë—É—Å—Ç', basePrice: 5000, effect: () => coins += 1000, description: 'Rare Pepe energy! üê∏' },
        ];

        function getPrice(base, owned) {
            return Math.floor(base * Math.pow(1.15, owned));
        }

        function saveGame() {
            localStorage.setItem(`${currentUser}_coins`, coins);
            localStorage.setItem(`${currentUser}_coinsPerClick`, coinsPerClick);
            localStorage.setItem(`${currentUser}_incomePerSec`, incomePerSec);
            localStorage.setItem(`${currentUser}_businesses`, JSON.stringify(businesses));
            localStorage.setItem(`${currentUser}_upgrades`, JSON.stringify(upgrades));
            localStorage.setItem(`${currentUser}_memes`, JSON.stringify(memes));
        }

        function updateDisplay() {
            coinCount.textContent = Math.floor(coins);
        }

        function renderItems(category) {
            itemsContainer.innerHTML = '';
            let items = [];
            if (category === 'businesses') items = businessItems;
            else if (category === 'upgrades') items = upgradeItems;
            else if (category === 'memes') items = memeItems;

            items.forEach(item => {
                const owned = businesses[item.id] || upgrades[item.id] || memes[item.id] || 0;
                const price = getPrice(item.basePrice, owned);
                const income = item.baseIncome ? item.baseIncome * (owned + 1) : 0;

                const itemEl = document.createElement('div');
                itemEl.className = 'item';
                itemEl.innerHTML = `
                    <h3>${item.name}</h3>
                    <p>${item.description}</p>
                    <p>–í–ª–∞–¥–µ–ª–µ—Ü: ${owned}</p>
                    <p>–¶–µ–Ω–∞: ${price}</p>
                    ${income ? `<p>–î–æ—Ö–æ–¥: ${income}/—Å–µ–∫</p>` : ''}
                    <button class="buy-btn" data-id="${item.id}" data-category="${category}">–ö—É–ø–∏—Ç—å</button>
                `;
                itemsContainer.appendChild(itemEl);
            });
        }

        categoryBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                categoryBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                renderItems(btn.dataset.category);
            });
        });

        itemsContainer.addEventListener('click', (e) => {
            if (e.target.classList.contains('buy-btn')) {
                const id = e.target.dataset.id;
                const category = e.target.dataset.category;
                let itemList = category === 'businesses' ? businessItems : category === 'upgrades' ? upgradeItems : memeItems;
                let storage = category === 'businesses' ? businesses : category === 'upgrades' ? upgrades : memes;
                const item = itemList.find(i => i.id === id);
                const owned = storage[id] || 0;
                const price = getPrice(item.basePrice, owned);

                if (coins >= price) {
                    coins -= price;
                    storage[id] = owned + 1;
                    if (category === 'businesses') {
                        incomePerSec += item.baseIncome;
                    } else if (category === 'upgrades') {
                        item.effect();
                    } else if (category === 'memes') {
                        item.effect();
                    }
                    updateDisplay();
                    saveGame();
                    renderItems(category);
                }
            }
        });

        updateDisplay();
        renderItems('businesses');

        function logout() {
            localStorage.removeItem('currentUser');
            window.location.href = 'login.html';
        }
    </script>
</body>
</html>